// (C) 2021 GoodData Corporation
import { __awaiter, __generator } from "tslib";
import { queryEnvelopeWithPromise } from "./queryProcessing";
/**
 * Dispatches a query and returns a promise to its result.
 *
 * @param dispatch - dashboard dispatch to use
 * @param query - query to trigger and wait for results of
 * @returns Promise of the query result
 * @alpha
 */
export function queryAndWaitFor(dispatch, query) {
    return __awaiter(this, void 0, void 0, function () {
        var _a, promise, envelope;
        return __generator(this, function (_b) {
            _a = queryEnvelopeWithPromise(query), promise = _a.promise, envelope = _a.envelope;
            dispatch(envelope);
            return [2 /*return*/, promise];
        });
    });
}
//# sourceMappingURL=queryAndWaitFor.js.map