import { __assign } from "tslib";
// (C) 2007-2020 GoodData Corporation
import React from "react";
import flatMap from "lodash/flatMap";
import { DashboardLayoutItem } from "./DashboardLayoutItem";
import { DashboardLayoutSectionRenderer } from "./DashboardLayoutSectionRenderer";
import { DashboardLayoutSectionHeaderRenderer } from "./DashboardLayoutSectionHeaderRenderer";
export function DashboardLayoutSection(props) {
    var section = props.section, _a = props.sectionRenderer, sectionRenderer = _a === void 0 ? DashboardLayoutSectionRenderer : _a, _b = props.sectionHeaderRenderer, sectionHeaderRenderer = _b === void 0 ? DashboardLayoutSectionHeaderRenderer : _b, _c = props.itemKeyGetter, itemKeyGetter = _c === void 0 ? function (_a) {
        var item = _a.item;
        return item.index();
    } : _c, _d = props.gridRowRenderer, gridRowRenderer = _d === void 0 ? function (_a) {
        var children = _a.children;
        return children;
    } : _d, itemRenderer = props.itemRenderer, widgetRenderer = props.widgetRenderer, screen = props.screen;
    var renderProps = { section: section, screen: screen };
    var items = flatMap(section.items().asGridRows(screen), function (itemsInRow) {
        var rowItems = itemsInRow.map(function (item) { return (React.createElement(DashboardLayoutItem, { key: itemKeyGetter({ item: item, screen: screen }), item: item, itemRenderer: itemRenderer, widgetRenderer: widgetRenderer, screen: screen })); });
        return gridRowRenderer
            ? gridRowRenderer({ children: rowItems, screen: screen, section: section, items: itemsInRow })
            : rowItems;
    });
    return sectionRenderer(__assign(__assign({}, renderProps), { DefaultSectionRenderer: DashboardLayoutSectionRenderer, children: (React.createElement(React.Fragment, null,
            sectionHeaderRenderer &&
                sectionHeaderRenderer({
                    section: section,
                    screen: screen,
                    DefaultSectionHeaderRenderer: DashboardLayoutSectionHeaderRenderer,
                }),
            items)) }));
}
//# sourceMappingURL=DashboardLayoutSection.js.map