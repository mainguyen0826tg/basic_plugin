// (C) 2021 GoodData Corporation
import LRUCache from "lru-cache";
import { LOADER_CACHE_SIZE } from "./constants";
export var dataLoaderAbstractFactory = function (createLoader) {
    var loaders = new LRUCache({ max: LOADER_CACHE_SIZE });
    return {
        forWorkspace: function (workspace) {
            var loader = loaders.get(workspace);
            if (!loader) {
                loader = createLoader(workspace);
                loaders.set(workspace, loader);
            }
            return loader;
        },
        reset: function () {
            loaders.reset();
        },
    };
};
//# sourceMappingURL=DataLoaderAbstractFactory.js.map