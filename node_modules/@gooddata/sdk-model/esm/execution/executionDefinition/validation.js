import { __spreadArrays } from "tslib";
// (C) 2021 GoodData Corporation
import groupBy from "lodash/groupBy";
import toPairs from "lodash/toPairs";
import invariant from "ts-invariant";
import { attributeLocalId, isAttribute } from "../attribute";
import { measureLocalId } from "../measure";
/**
 * Validates the {@link IExecutionDefinition} instance and throws if it is invalid.
 * @param definition - the definition to validate
 * @internal
 */
export function defValidate(definition) {
    var itemsWithLocalId = __spreadArrays(definition.attributes, definition.measures);
    var groups = groupBy(itemsWithLocalId, function (item) {
        return isAttribute(item) ? attributeLocalId(item) : measureLocalId(item);
    });
    toPairs(groups).forEach(function (_a) {
        var localId = _a[0], items = _a[1];
        invariant(items.length === 1, "There are " + items.length + " items with the same localId '" + localId + "'. Please make sure the attributes and measures in the execution definition have unique localIds.");
    });
}
//# sourceMappingURL=validation.js.map