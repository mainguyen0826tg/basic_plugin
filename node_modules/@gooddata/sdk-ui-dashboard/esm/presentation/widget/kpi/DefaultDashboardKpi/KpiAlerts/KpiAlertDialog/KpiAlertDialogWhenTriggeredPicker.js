import { __assign } from "tslib";
// (C) 2021 GoodData Corporation
import React, { useMemo } from "react";
import cx from "classnames";
import { Dropdown, DropdownButton, DropdownList, ShortenedText } from "@gooddata/sdk-ui-kit";
import { stringUtils } from "@gooddata/util";
var kpiAlertTypeItems = [
    { title: "kpiAlertDialog.threshold.above", id: "aboveThreshold" },
    { title: "kpiAlertDialog.threshold.below", id: "underThreshold" },
];
export var KpiAlertDialogWhenTriggeredPicker = function (_a) {
    var intl = _a.intl, onWhenTriggeredChange = _a.onWhenTriggeredChange, whenTriggered = _a.whenTriggered;
    var alertTypeItems = useMemo(function () {
        return kpiAlertTypeItems.map(function (item) { return (__assign(__assign({}, item), { title: intl.formatMessage({ id: item.title }) })); });
    }, [intl]);
    var selectedItem = alertTypeItems.find(function (item) { return item.id === whenTriggered; });
    return (React.createElement(Dropdown, { className: "alert-select s-alert_select", renderButton: function (_a) {
            var toggleDropdown = _a.toggleDropdown;
            return (React.createElement(DropdownButton, { className: "dropdown-button", value: selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.title, onClick: toggleDropdown }));
        }, renderBody: function (_a) {
            var closeDropdown = _a.closeDropdown;
            return (React.createElement(DropdownList, { className: "s-alert-list", width: 256, items: alertTypeItems, itemsCount: alertTypeItems.length, renderItem: function (_a) {
                    var item = _a.item;
                    return (React.createElement("div", { className: cx("gd-list-item", "gd-list-item-shortened", "s-" + stringUtils.simplifyText(item.title)), onClick: function (e) {
                            e.preventDefault();
                            onWhenTriggeredChange(item.id);
                            closeDropdown();
                        } },
                        React.createElement(ShortenedText, null, item.title)));
                } }));
        } }));
};
//# sourceMappingURL=KpiAlertDialogWhenTriggeredPicker.js.map