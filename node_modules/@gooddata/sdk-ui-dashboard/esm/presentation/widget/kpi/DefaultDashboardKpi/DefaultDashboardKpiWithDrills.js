import { __assign } from "tslib";
// (C) 2020 GoodData Corporation
import React, { useCallback } from "react";
import { DashboardKpiCore } from "./DashboardKpiCore";
import { useDrill, useDrillToLegacyDashboard } from "../../../drill";
import { useDashboardSelector, selectDisableDefaultDrills } from "../../../../model";
/**
 * @internal
 */
export var DefaultDashboardKpiWithDrills = function (props) {
    var kpiWidget = props.kpiWidget;
    var disableDefaultDrills = useDashboardSelector(selectDisableDefaultDrills);
    var handleDrillToLegacyDashboard = useDrillToLegacyDashboard().run;
    var handleDrill = useDrill({
        onSuccess: function (event) {
            if (disableDefaultDrills || !event.payload.drillEvent.drillDefinitions[0]) {
                return;
            }
            handleDrillToLegacyDashboard(event.payload.drillEvent.drillDefinitions[0], event.payload.drillEvent, event.correlationId);
        },
    }).run;
    var onDrill = useCallback(function (event) {
        handleDrill(event, {
            widget: kpiWidget,
        });
    }, [handleDrill, kpiWidget]);
    return React.createElement(DashboardKpiCore, __assign({}, props, { onDrill: onDrill }));
};
//# sourceMappingURL=DefaultDashboardKpiWithDrills.js.map