import { __read } from "tslib";
// (C) 2021 GoodData Corporation
import React, { useState, useCallback, useMemo } from "react";
import { FormattedMessage } from "react-intl";
import cx from "classnames";
import { BubbleHoverTrigger, Bubble } from "@gooddata/sdk-ui-kit";
import DrillModalExportOptions from "./DrillModalExportOptions";
var bubbleAlignPoints = [{ align: "tc bc" }];
export var DrillModalFooter = function (_a) {
    var exportAvailable = _a.exportAvailable, exportXLSXEnabled = _a.exportXLSXEnabled, onExportXLSX = _a.onExportXLSX, exportCSVEnabled = _a.exportCSVEnabled, onExportCSV = _a.onExportCSV, isLoading = _a.isLoading;
    var _b = __read(useState(false), 2), showDropdown = _b[0], setShowDropdown = _b[1];
    var toggleShowDropdown = useCallback(function () { return setShowDropdown(function (oldValue) { return !oldValue; }); }, []);
    var handleOnExportXLSX = useCallback(function () {
        onExportXLSX();
        setShowDropdown(false);
    }, [onExportXLSX]);
    var handleOnExportCSV = useCallback(function () {
        onExportCSV();
        setShowDropdown(false);
    }, [onExportCSV]);
    var exportDisabled = !exportAvailable || (!exportXLSXEnabled && !exportCSVEnabled);
    var toggleButton = useMemo(function () { return (React.createElement("button", { onClick: toggleShowDropdown, className: cx("gd-button-link-dimmed gd-button gd-icon-download export-menu-toggle-button", {
            disabled: exportDisabled,
        }), type: "button" },
        React.createElement("span", { className: "gd-button-text" },
            React.createElement(FormattedMessage, { id: "dialogs.export.submit" })))); }, [exportDisabled, toggleShowDropdown]);
    return (React.createElement("div", { className: cx("s-export-drilled-insight export-drilled-insight", {
            "is-disabled": exportDisabled,
        }) }, exportDisabled && !isLoading ? (React.createElement(BubbleHoverTrigger, null,
        toggleButton,
        React.createElement(Bubble, { className: "bubble-primary", alignPoints: bubbleAlignPoints },
            React.createElement(FormattedMessage, { id: "export_unsupported.disabled" })))) : (React.createElement(React.Fragment, null,
        toggleButton,
        React.createElement(DrillModalExportOptions, { showDropdown: showDropdown, toggleShowDropdown: toggleShowDropdown, exportXLSXEnabled: exportXLSXEnabled, exportCSVEnabled: exportCSVEnabled, onExportXLSX: handleOnExportXLSX, onExportCSV: handleOnExportCSV })))));
};
//# sourceMappingURL=DrillModalFooter.js.map