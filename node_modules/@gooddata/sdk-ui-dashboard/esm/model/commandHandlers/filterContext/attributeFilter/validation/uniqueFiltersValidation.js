import { __awaiter, __generator, __read, __spread } from "tslib";
import { areObjRefsEqual } from "@gooddata/sdk-model";
export function canFilterBeAdded(ctx, addedDisplayFormRef, allFilters) {
    return __awaiter(this, void 0, void 0, function () {
        var _a, addedDisplayForm, existingDisplayForms;
        return __generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    // first filter is always ok, save some useless work upfront
                    if (allFilters.length === 0) {
                        return [2 /*return*/, true];
                    }
                    return [4 /*yield*/, ctx.backend
                            .workspace(ctx.workspace)
                            .attributes()
                            .getAttributeDisplayForms(__spread([
                            addedDisplayFormRef
                        ], allFilters.map(function (item) { return item.attributeFilter.displayForm; })))];
                case 1:
                    _a = __read.apply(void 0, [_b.sent()]), addedDisplayForm = _a[0], existingDisplayForms = _a.slice(1);
                    return [2 /*return*/, !existingDisplayForms.some(function (existing) { return areObjRefsEqual(existing, addedDisplayForm); })];
            }
        });
    });
}
//# sourceMappingURL=uniqueFiltersValidation.js.map