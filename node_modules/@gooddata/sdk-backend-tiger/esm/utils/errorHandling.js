// (C) 2019-2021 GoodData Corporation
import { isAnalyticalBackendError, NotAuthenticated, UnexpectedError, } from "@gooddata/sdk-backend-spi";
export function convertApiError(error) {
    if (isAnalyticalBackendError(error)) {
        return error;
    }
    var notAuthenticated = createNotAuthenticatedError(error);
    if (notAuthenticated) {
        throw notAuthenticated;
    }
    return new UnexpectedError("An unexpected error has occurred", error);
}
export function createNotAuthenticatedError(error) {
    var axiosErrorResponse = error.response;
    if (!axiosErrorResponse || axiosErrorResponse.status !== 401) {
        return;
    }
    var exc = new NotAuthenticated("No session or session expired", error);
    // TODO: TIGER-HACK both of these params need to come from the backend.
    //  current problems:
    //  - some resources do not send login URL (empty 401), some do
    //  - no resources send returnRedirectParam
    exc.authenticationFlow = {
        loginUrl: "/appLogin",
        returnRedirectParam: "redirectTo",
    };
    return exc;
}
//# sourceMappingURL=errorHandling.js.map