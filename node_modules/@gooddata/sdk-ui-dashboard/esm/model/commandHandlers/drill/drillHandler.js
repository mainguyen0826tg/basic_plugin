import { __assign, __generator } from "tslib";
import { put } from "redux-saga/effects";
import { drillRequested, drillResolved } from "../../events/drill";
import { filterDrillsByDrillEvent } from "../../../_staging/drills/drillingUtils";
export function drillHandler(ctx, cmd) {
    var validDrillDefinitions;
    return __generator(this, function (_a) {
        switch (_a.label) {
            case 0: return [4 /*yield*/, put(drillRequested(ctx, cmd.payload.drillEvent, cmd.payload.drillContext, cmd.correlationId))];
            case 1:
                _a.sent();
                validDrillDefinitions = filterDrillsByDrillEvent(cmd.payload.drillEvent.drillDefinitions, cmd.payload.drillEvent);
                return [2 /*return*/, drillResolved(ctx, __assign(__assign({}, cmd.payload.drillEvent), { drillDefinitions: validDrillDefinitions }), cmd.payload.drillContext, cmd.correlationId)];
        }
    });
}
//# sourceMappingURL=drillHandler.js.map